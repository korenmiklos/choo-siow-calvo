# Research Meeting Summary: Manager-Firm Matching Pipeline Development

**Date:** October 24, 2025  

## Attendees

- Miklos
- Ulrich

## Overview

The meeting focused on reviewing and debugging a Julia-based computational pipeline for estimating manager-firm matching models using mobility network data. The team discussed technical implementation issues, identified problems with the current approach, and established priorities for further development.

## Technical Discussion

### Current Pipeline Status

**What's Working:**
- Julia pipeline successfully runs on local machines
- Sparse adjacency matrix implementation for manager-firm bipartite graphs functional
- Code generates edge lists for 2-hop and 4-hop connections in projected networks
- Makefile integration operational with proper dependency management
- CSV and Parquet export functionality implemented
- Basic network projection from bipartite to manager-manager and firm-firm graphs working

**Implementation Details:**
- Using sparse matrices in Julia for computational efficiency
- Processing ~1.9 million edges from Hungarian manufacturing data
- Generating separate files for pure 2-hop and pure 4-hop connections
- Pipeline branch contains working code ready for integration

### Key Technical Issues Identified

**1. Double Counting Problem:**
- Multiple shortest paths of same length between manager pairs create duplicate edges
- Example: Manager 1 and Manager 4 connected through firms A and B simultaneously
- Covariance estimates overweighting certain connections
- Current approach treats multiple paths as independent, which may violate GMRF assumptions

**2. Sample Inconsistency:**
- Different sample sizes between 2-hop (~1.4M edges) and 4-hop (~1.9M edges) networks
- 4-hop network contains more connections than 2-hop, creating non-comparable moment estimates
- Some 2-hop connections do not extend to 4-hop (isolated components)
- Covariance calculations performed on different underlying samples

**3. Methodological Concerns:**
- Current implementation walks on projected graph rather than original bipartite structure
- Unclear whether shortest path algorithm properly handles witness firms
- Potential cycles in network walks not definitively eliminated
- GMRF assumptions may not hold with multiple connection paths

**4. Computational Architecture Issues:**
- Julia version compatibility problems (1.10.4 vs 1.12)
- 32-bit vs 64-bit integer type conflicts in edge indexing
- StatsBase package dependency resolution failures

### Methodological Decisions

**Immediate Priorities (agreed upon):**
1. **Time Effects Removal:** Remove year-by-year means from outcome variables before computing covariances
2. **Double Counting Investigation:** Implement edge-level counting to track multiple paths between same manager pairs
3. **Sample Consistency:** Ensure 2-hop and 4-hop covariances computed on comparable samples
4. **GMRF Validation:** Theoretical verification of whether multiple paths preserve Gaussian Markov Random Field assumptions

**Approach Refinements:**
- Move from manager-level to edge-level analysis to handle duplicate spells properly
- Implement purification algorithm that removes previously counted shorter paths from longer walks
- Add unit tests to verify edge consistency across hop lengths
- Consider weighting scheme for multiple paths between same node pairs

**Theoretical Framework:**
- Maintain focus on variance-covariance decomposition: 4-step covariances should equal ρ² times 2-step covariances
- Preserve identification strategy based on network path decay
- Allow for disconnected components in network (advantage over fixed effects models)

## Action Items

**Ulrich:**
- Fix Julia version compatibility and integer type issues
- Implement time effects removal (year demeaning) before covariance computation
- Develop diagnostic statistics for double counting (count paths per manager pair)
- Generate descriptive statistics on network structure (giant component analysis, density measures)
- Create edge-level implementation to replace current manager-level approach
- Add unit tests for edge consistency verification

**Miklos:**
- Investigate GMRF theoretical properties with multiple connection paths
- Consult literature/AI tools on projected graph covariance properties under random graph models
- Consider dual graph representation where edges become nodes
- Develop weighting scheme for multiple shortest paths

**Joint Tasks:**
- Merge pipeline branch to main after current issues resolved
- Establish testing framework for network algorithms
- Document assumptions about temporal structure in mobility data

## Technical Notes

**Network Structure Insights:**
- Extremely sparse bipartite graph: ~1M edges connecting 1.5M managers to 1M firms
- Approximately one edge per node (ultra-sparse regime)
- Giant component contains ~180k managers (small relative to total)
- Network sparsity suggests double counting may be limited problem in practice

